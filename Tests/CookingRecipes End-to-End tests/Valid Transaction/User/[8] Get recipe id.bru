meta {
  name: [8] Get recipe id
  type: http
  seq: 8
}

get {
  url: {{baseUrl}}/recipes/userRecipes
  body: none
  auth: bearer
}

auth:bearer {
  token: {{token}}
}

assert {
  res.status: eq 200
}

script:post-response {
  let responseBody = res.getBody();
  
  if (res.getStatus() == 200) {
    bru.setEnvVar("recipeId", responseBody.recipes[0].id);
  }
  
}

tests {
  test("status code 200", function() {
    const data = res.getBody();
    expect(res.getStatus()).to.equal(200);
  });
  
  test("recipeId is " + bru.getEnvVar("recipeId"), function() {
    const data = res.getBody();
    expect(data.recipes[0].id).to.be.a("number");
    expect(data.recipes[0].id).to.equal(bru.getEnvVar("recipeId"));
  });
  
  test("name value is Test", function() {
    const data = res.getBody();
    expect(data.recipes[0].name).to.be.a("string");
    expect(data.recipes[0].name).to.equal("Test");
  });
  
  test("description value is Test", function() {
    const data = res.getBody();
    expect(data.recipes[0].description).to.be.a("string");
    expect(data.recipes[0].description).to.equal("Test");
  });
  
  test("authorName value is Edit Test", function() {
    const data = res.getBody();
    expect(data.recipes[0].authorName).to.be.a("string");
    expect(data.recipes[0].authorName).to.equal("Edit Test");
  });
  
  test("cookingTime value is 10", function() {
    const data = res.getBody();
    expect(data.recipes[0].cookingTime).to.be.a("number");
    expect(data.recipes[0].cookingTime).to.equal(10);
  });
  
  test("portion value is 2", function() {
    const data = res.getBody();
    expect(data.recipes[0].portion).to.be.a("number");
    expect(data.recipes[0].portion).to.equal(2);
  });
  
  test("avatarPath value is null", function() {
    const data = res.getBody();
    expect(data.recipes[0].avatarPath).to.be.null;
  });
  
  test("isLike value is false", function() {
    const data = res.getBody();
    expect(data.recipes[0].isLike).to.be.a("boolean");
    expect(data.recipes[0].isLike).to.equal(false);
  });
  
  test("likeCount value is 0", function() {
    const data = res.getBody();
    expect(data.recipes[0].likeCount).to.be.a("number");
    expect(data.recipes[0].likeCount).to.equal(0);
  });
  
  test("isFavourite value is false", function() {
    const data = res.getBody();
    expect(data.recipes[0].isLike).to.be.a("boolean");
    expect(data.recipes[0].isLike).to.equal(false);
  });
  
  test("favouriteCount value is 0", function() {
    const data = res.getBody();
    expect(data.recipes[0].likeCount).to.be.a("number");
    expect(data.recipes[0].likeCount).to.equal(0);
  });
  
  test("tags value is an empty array", function() {
    const data = res.getBody();
    expect(data.recipes[0].tags).to.be.an('array');
    expect(data.recipes[0].tags.length).to.equal(0);
  });
  
  test("isLastRecipes value is true", function() {
    const data = res.getBody();
    expect(data.isLastRecipes).to.be.a("boolean");
    expect(data.isLastRecipes).to.equal(true);
  });
}
